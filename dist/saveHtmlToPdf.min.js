angular.module("htmlToPdfSave",[]),angular.module("htmlToPdfSave").directive("pdfSaveButton",["$rootScope","$pdfStorage",function(e,t){return{restrict:"A",link:function(a,n,o){t.pdfSaveButtons.push(n),a.buttonText="Button",n.on("click",function(){var t=o.pdfSaveButton,a=o.pdfName,n=o.pdfNumberOfPages||1;e.$broadcast("savePdfEvent",{activePdfSaveId:t,activePdfSaveName:a,numberOfPages:n})})}}}]),angular.module("htmlToPdfSave").directive("pdfSaveContent",["$rootScope","$pdfStorage",function(e,t){return{link:function(e,a,n){t.pdfSaveContents.push(a);var o=e.$on("savePdfEvent",function(e,n){function o(e,t){return e==t}function d(e,t){for(var a=$("div[pdf-save-content="+t+"]")[0],n=new jsPDF("p","pt","letter"),o=0;o<u;o++)!function(e){var o=u>1?$("div[pdf-save-content="+t+"] [pdf-page="+(e+1)+"]")[0]:a;e>0&&(n.addPage(612,791),n.setPage(e+1)),html2canvas(o,{onrendered:function(t){for(var a=0;a<=o.clientHeight/980;a++){var d=t,f=980*a;window.onePageCanvas=document.createElement("canvas"),onePageCanvas.setAttribute("width",900),onePageCanvas.setAttribute("height",980);onePageCanvas.getContext("2d").drawImage(d,0,f,900,980,0,0,900,980);var v=onePageCanvas.toDataURL("image/png",1),i=onePageCanvas.width,r=onePageCanvas.clientHeight;a>0&&n.addPage(612,791),n.setPage(e+(a+1)),n.addImage(v,"PNG",20,40,.62*i,.62*r),e===u-1&&n.save(s)}}})}(o)}for(var f=a,v=f[0].getAttribute("pdf-save-content"),i=t.pdfSaveContents,r=n.activePdfSaveId,s=n.activePdfSaveName||"default.pdf",u=n.numberOfPages,c=0;c<i.length;c++)if(o(r,v)){var g=i[c],p=g[0],P=p.getAttribute("pdf-save-content");if(o(P,r)){console.log("Id is same"),function(e,t){d(e,t)}(i,P);break}}});e.$on("$destroy",o)}}}]),angular.module("htmlToPdfSave").service("$pdfStorage",function(){this.pdfSaveButtons=[],this.pdfSaveContents=[]}).service("pdfSaveConfig",function(){this.pdfName="default.pdf"});