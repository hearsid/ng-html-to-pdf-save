angular.module("htmlToPdfSave",[]),angular.module("htmlToPdfSave").directive("pdfSaveButton",["$rootScope","$pdfStorage",function(e,t){return{restrict:"A",link:function(a,n,o){t.pdfSaveButtons.push(n),a.buttonText="Button",n.on("click",function(){var t=o.pdfSaveButton,a=o.pdfName;e.$broadcast("savePdfEvent",{activePdfSaveId:t,activePdfSaveName:a})})}}}]),angular.module("htmlToPdfSave").directive("pdfSaveContent",["$rootScope","$pdfStorage",function(e,t){return{link:function(e,a,n){t.pdfSaveContents.push(a);var o=e.$on("savePdfEvent",function(e,n){function o(e,t){return e==t}function d(e,t,a){var n=$("div[pdf-save-content="+e+"] [pdf-page]").length||1,o=n>1?$("div[pdf-save-content="+e+"] [pdf-page="+(t+1)+"]")[0]:$("div[pdf-save-content="+e+"]")[0];html2canvas(o,{onrendered:function(e){for(var n=0;n<=o.clientHeight/980;n++){var d=e,v=980*n;window.onePageCanvas=document.createElement("canvas"),onePageCanvas.setAttribute("width",900),onePageCanvas.setAttribute("height",980);onePageCanvas.getContext("2d").drawImage(d,0,v,900,980,0,0,900,980);var f=onePageCanvas.toDataURL("image/png",1),i=onePageCanvas.width,r=onePageCanvas.clientHeight;n>0&&a.addPage(612,791),a.addImage(f,"PNG",20,40,.62*i,.62*r)}t===u.length-1?a.save(c):(a.addPage(612,791),u[t+1]())}})}function v(e,t){for(var a=($("div[pdf-save-content="+t+"]")[0],new jsPDF("p","pt","letter")),n=$("div[pdf-save-content="+t+"] [pdf-page]").length||1,o=0;o<n;o++)u.push(d.bind(this,t,o,a));u[0]()}for(var f=a,i=f[0].getAttribute("pdf-save-content"),r=t.pdfSaveContents,s=n.activePdfSaveId,c=n.activePdfSaveName||"default.pdf",u=[],p=0;p<r.length;p++)if(o(s,i)){var g=r[p],l=g[0],h=l.getAttribute("pdf-save-content");if(o(h,s)){console.log("Id is same"),function(e,t){v(e,t)}(r,h);break}}});e.$on("$destroy",o)}}}]),angular.module("htmlToPdfSave").service("$pdfStorage",function(){this.pdfSaveButtons=[],this.pdfSaveContents=[]}).service("pdfSaveConfig",function(){this.pdfName="default.pdf"});